/**
* jquery.tabify
* Copyright (C) 2014  Oleksandr Knyga, oleksandrknyga@gmail.com
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
 */

(function(c){var f,h=function(a,e){var d=a.attr("href").substr(2);this.head=a;this.element=c("#"+d).eq(0);this.isExists=0<this.element.length;this.hasParent=!1;this.parent=null;this.name=d;for(var d=0,k=e.length;d<k;d++){var b=this.element.parents("#"+e[d]);if(0<b.length){this.parent=b;this.hasParent=!0;break}}this.elements={};this.initElements(this)};h.prototype={toogle:function(){a.getActive().hide();this.show()},show:function(){this.hasParent?(this.parent.show(),c("html, body").animate({scrollTop:this.element.offset().top},
f.scrollTime)):(this.element.show(),a.active=this.name);c("."+f.activeClass).removeClass(f.activeClass);this.head.addClass(f.activeClass)},hide:function(){this.hasParent?this.parent.hide():(this.element.hide(),a.active="")},initElements:function(){var a=this,e=this.name;this.element.find("*[data-id]").each(function(){var d=c(this).data("id");c(this).click(function(){b.ignoreChange("#!"+e+"/"+d)});a.elements[d]=c(this)})},getElement:function(a){return this.elements[a]}};var a={_default:"",active:"",
_list:{},_onReady:function(){},scan:function(){var g={};names=[];c(this).find("a[href^='#'][data-tab='true']").each(function(){var b=c(this),d=b.attr("href").substr(1),e=b.data("active");g[d]=b;names.push(d);"undefined"===typeof e||"0"===e&&"false"===e||(a.active=d);b.attr("href","#!"+b.attr("href").substr(1))});for(var e=0,d=names.length,b="";e<d;e++)b=names[e],a._list[b]=new h(g[b],names);!a.active&&0<names.length&&(a.active=names[0]);a._default=a.active;e=0;d=names.length;for(b="";e<d;e++)b=names[e],
b!=a.active&&a.get(names[e]).hide();a.getActive().show();a._onReady.apply(a)},onReady:function(b){"function"===typeof b&&(a._onReady=b)},getActive:function(){return a._list.hasOwnProperty(a.active)?a._list[a.active]:a._list[a._default]},get:function(b){return a._list.hasOwnProperty(b)?a._list[b]:a._list[a._default]}},b={_ignoreOne:!1,init:function(){c(window).on("hashchange",b.handle)},handle:function(){var c=/#!([^\/]*)(\/(.+))?\/?/.exec(location.hash);if(null==c)b.onChange(a._default);else b.onChange(c[1],
c[3])},onChange:function(c,e){if(b._ignoreOne)b._ignoreOne=!1;else{var d=a.get(c),f=d.getElement(e);d.toogle();f&&f.click()}},ignoreChange:function(a){b._ignoreOne=!0;location.hash=a}};c.fn.tabify=function(g){f=c.extend({},c.fn.tabify.defaults,g);b.init();a.onReady(function(){c(document).ready(function(){b.handle()})});return this.each(function(){a.scan.apply(this)})};c.fn.tabify.defaults={scrollTime:500,activeClass:"active"}})(jQuery);